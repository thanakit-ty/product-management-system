import{q as P,s as B,r as k,b as w,d as M,c as q,w as D,u as F,o as i,a as t,g as n,i as d,t as c,x as T,j as u,m as p,p as x,v as f,l as O}from"./index-C5d7Pc4o.js";import{A as E}from"./AppLayout-CHHhpvw4.js";const S=P.create({baseURL:"http://localhost:4000"});S.interceptors.request.use(g=>{try{const v=B();v?.accessToken&&(g.headers=g.headers||{},g.headers.Authorization=`Bearer ${v.accessToken}`)}catch{}return g});const I={class:"space-y-6"},K={class:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between"},z={class:"flex items-center gap-2"},L=["disabled"],R={key:0,class:"rounded-xl border border-green-200 bg-green-50 px-4 py-3 text-sm text-green-800",role:"status"},W={class:"rounded-xl border border-slate-200 bg-white"},$={key:0,class:"mb-4 rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700"},G={class:"grid grid-cols-1 gap-4 md:grid-cols-12"},H={class:"md:col-span-6"},J=["disabled"],Q={key:0,class:"mt-1 text-xs text-red-600"},X={class:"md:col-span-6"},Y=["disabled"],Z={key:0,class:"mt-1 text-xs text-red-600"},ee={class:"md:col-span-6"},te=["disabled"],se={key:0,class:"mt-1 text-xs text-red-600"},oe={class:"md:col-span-6"},re=["disabled"],le={key:0,class:"mt-1 text-xs text-red-600"},ae={class:"md:col-span-6"},ie=["disabled"],ne={key:0,class:"mt-1 text-xs text-red-600"},de={class:"mt-1 text-xs text-slate-600"},ce={class:"font-semibold text-slate-900"},ue={class:"md:col-span-6"},pe=["disabled"],me={key:0,class:"mt-1 text-xs text-red-600"},be={class:"md:col-span-12"},xe=["disabled"],fe={key:0,class:"mt-1 text-xs text-red-600"},ge={class:"mt-6 flex items-center justify-end gap-2 border-t border-slate-200 pt-4"},ve=["disabled"],ye=["disabled"],ke={key:0,class:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-white/60 border-t-white"},we={__name:"AddProductView",setup(g){const v=F(),a=k(!1),m=k(""),y=k(""),o=w({name:"",sku:"",category:"",description:"",price:"0",stock:"0",status:"active"}),s=w({name:"",sku:"",category:"",description:"",price:"",stock:"",status:""}),N=M(()=>{const l=Number(o.price),e=Number.isFinite(l)?l:0;return new Intl.NumberFormat(void 0,{style:"currency",currency:"USD"}).format(e)});function b(l){return l?"border-red-300 focus:border-red-400 focus:ring-red-100":"border-slate-300 focus:border-slate-400 focus:ring-slate-200"}function U(){for(const l of Object.keys(s))s[l]=""}function V(){U(),(!o.name||o.name.trim().length<2)&&(s.name="Name must be at least 2 characters"),(!o.sku||o.sku.trim().length<3)&&(s.sku="SKU must be at least 3 characters"),(!o.category||o.category.trim().length===0)&&(s.category="Category is required");const l=Number(o.price);Number.isFinite(l)?l<0&&(s.price="Price must be 0 or greater"):s.price="Price is required";const e=Number(o.stock);return Number.isFinite(e)?Number.isInteger(e)?e<0&&(s.stock="Stock must be 0 or greater"):s.stock="Stock must be an integer":s.stock="Stock is required",o.status!=="active"&&o.status!=="inactive"&&(s.status="Status must be active or inactive"),o.description&&o.description.length>500&&(s.description="Description must be 500 characters or less"),Object.values(s).every(r=>!r)}function h(){v.push("/products")}async function C(){if(m.value="",y.value="",!!V()){a.value=!0;try{const l={name:o.name.trim(),sku:o.sku.trim(),category:o.category.trim(),description:o.description?o.description.trim():"",price:Number(o.price),stock:Number(o.stock),status:o.status};await S.post("/api/products",l),y.value="Product created successfully.",setTimeout(()=>{v.replace("/products")},500)}catch(l){const e=l?.response?.status,r=l?.response?.data?.message||l?.message||"Failed to create product";if(e===409)s.sku="SKU already exists",m.value=r;else if(e===400&&l?.response?.data?.details){const j=l.response.data.details;for(const[_,A]of Object.entries(j))_ in s&&(s[_]=String(A));m.value=r}else m.value=r}finally{a.value=!1}}}return(l,e)=>(i(),q(E,null,{default:D(()=>[t("div",I,[t("div",K,[e[7]||(e[7]=t("div",null,[t("h2",{class:"text-2xl font-semibold tracking-tight text-slate-900"},"Add Product"),t("p",{class:"mt-1 text-sm text-slate-600"},"Create a new product in your catalog")],-1)),t("div",z,[t("button",{type:"button",class:"inline-flex items-center justify-center rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-semibold text-slate-800 transition hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-slate-200",onClick:h,disabled:a.value}," Back ",8,L)])]),y.value?(i(),n("div",R,c(y.value),1)):d("",!0),t("div",W,[t("form",{class:"p-5",onSubmit:T(C,["prevent"])},[m.value?(i(),n("div",$,c(m.value),1)):d("",!0),t("div",G,[t("div",H,[e[8]||(e[8]=t("label",{class:"block text-xs font-semibold text-slate-700"},[p("Name "),t("span",{class:"text-red-600"},"*")],-1)),u(t("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>o.name=r),type:"text",class:x(["mt-1 w-full rounded-lg border px-3 py-2 text-sm text-slate-900 placeholder:text-slate-400 focus:outline-none focus:ring-2",b(s.name)]),placeholder:"e.g. Wireless Mouse",disabled:a.value,autocomplete:"off"},null,10,J),[[f,o.name,void 0,{trim:!0}]]),s.name?(i(),n("p",Q,c(s.name),1)):d("",!0)]),t("div",X,[e[9]||(e[9]=t("label",{class:"block text-xs font-semibold text-slate-700"},[p("SKU "),t("span",{class:"text-red-600"},"*")],-1)),u(t("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>o.sku=r),type:"text",class:x(["mt-1 w-full rounded-lg border px-3 py-2 text-sm text-slate-900 placeholder:text-slate-400 focus:outline-none focus:ring-2",b(s.sku)]),placeholder:"e.g. WM-100",disabled:a.value,autocomplete:"off"},null,10,Y),[[f,o.sku,void 0,{trim:!0}]]),s.sku?(i(),n("p",Z,c(s.sku),1)):d("",!0)]),t("div",ee,[e[10]||(e[10]=t("label",{class:"block text-xs font-semibold text-slate-700"},[p("Category "),t("span",{class:"text-red-600"},"*")],-1)),u(t("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>o.category=r),type:"text",class:x(["mt-1 w-full rounded-lg border px-3 py-2 text-sm text-slate-900 placeholder:text-slate-400 focus:outline-none focus:ring-2",b(s.category)]),placeholder:"e.g. Accessories",disabled:a.value,autocomplete:"off"},null,10,te),[[f,o.category,void 0,{trim:!0}]]),s.category?(i(),n("p",se,c(s.category),1)):d("",!0)]),t("div",oe,[e[12]||(e[12]=t("label",{class:"block text-xs font-semibold text-slate-700"},"Status",-1)),u(t("select",{"onUpdate:modelValue":e[3]||(e[3]=r=>o.status=r),class:"mt-1 w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 focus:border-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-200",disabled:a.value},[...e[11]||(e[11]=[t("option",{value:"active"},"Active",-1),t("option",{value:"inactive"},"Inactive",-1)])],8,re),[[O,o.status]]),s.status?(i(),n("p",le,c(s.status),1)):d("",!0)]),t("div",ae,[e[14]||(e[14]=t("label",{class:"block text-xs font-semibold text-slate-700"},[p("Price "),t("span",{class:"text-red-600"},"*")],-1)),u(t("input",{"onUpdate:modelValue":e[4]||(e[4]=r=>o.price=r),type:"number",min:"0",step:"0.01",class:x(["mt-1 w-full rounded-lg border px-3 py-2 text-sm text-slate-900 placeholder:text-slate-400 focus:outline-none focus:ring-2",b(s.price)]),placeholder:"0.00",disabled:a.value},null,10,ie),[[f,o.price]]),s.price?(i(),n("p",ne,c(s.price),1)):d("",!0),t("p",de,[e[13]||(e[13]=p("Preview: ",-1)),t("span",ce,c(N.value),1)])]),t("div",ue,[e[15]||(e[15]=t("label",{class:"block text-xs font-semibold text-slate-700"},[p("Stock "),t("span",{class:"text-red-600"},"*")],-1)),u(t("input",{"onUpdate:modelValue":e[5]||(e[5]=r=>o.stock=r),type:"number",min:"0",step:"1",class:x(["mt-1 w-full rounded-lg border px-3 py-2 text-sm text-slate-900 placeholder:text-slate-400 focus:outline-none focus:ring-2",b(s.stock)]),placeholder:"0",disabled:a.value},null,10,pe),[[f,o.stock]]),s.stock?(i(),n("p",me,c(s.stock),1)):d("",!0)]),t("div",be,[e[16]||(e[16]=t("label",{class:"block text-xs font-semibold text-slate-700"},"Description",-1)),u(t("textarea",{"onUpdate:modelValue":e[6]||(e[6]=r=>o.description=r),rows:"4",class:x(["mt-1 w-full rounded-lg border px-3 py-2 text-sm text-slate-900 placeholder:text-slate-400 focus:outline-none focus:ring-2",b(s.description)]),placeholder:"Optional product description (max 500 characters)",disabled:a.value},null,10,xe),[[f,o.description]]),s.description?(i(),n("p",fe,c(s.description),1)):d("",!0)])]),t("div",ge,[t("button",{type:"button",class:"rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-semibold text-slate-800 transition hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-slate-200 disabled:opacity-50",onClick:h,disabled:a.value}," Cancel ",8,ve),t("button",{type:"submit",class:"inline-flex items-center justify-center rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-slate-400 disabled:opacity-50",disabled:a.value},[a.value?(i(),n("span",ke)):d("",!0),e[17]||(e[17]=p(" Save ",-1))],8,ye)])],32)])])]),_:1}))}};export{we as default};
